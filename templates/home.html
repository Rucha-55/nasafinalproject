{% extends "base.html" %}

{% block title %}Home - Vistara Intelligence Platform{% endblock %}

{% block extra_css %}
<style>
    /* Three.js Canvas Container */
    #threejs-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        pointer-events: none;
        background: linear-gradient(135deg, rgba(5, 6, 23, 0.8) 0%, rgba(11, 17, 32, 0.6) 50%, rgba(18, 24, 38, 0.4) 100%),
                    url('{{ url_for("static", filename="../images/img 1.jpg") }}');
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
    }

    /* Homepage specific layout */
    .homepage-content {
        position: relative;
        z-index: 1;
        min-height: calc(100vh - 70px);
        display: flex;
        flex-direction: column;
    }

    /* Footer styling for homepage */
    .space-ui-footer {
        position: relative;
        z-index: 3;
    }

    /* Page container for consistent spacing */
    .page-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
    }

    /* Page header styling */
    .page-header {
        text-align: center;
        margin-bottom: 30px;
    }

    .page-title {
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 15px;
        text-align: center;
    }

    .page-subtitle {
        font-size: 1.1rem;
        color: var(--text-secondary);
        max-width: 600px;
        margin: 0 auto;
        text-align: center;
    }

    /* Hero Section */
    .space-ui-hero {
        padding: 120px 0 80px;
        text-align: center;
        background: linear-gradient(135deg, var(--space-900) 0%, var(--space-800) 50%, var(--space-700) 100%),
                    url('{{ url_for("static", filename="../images/img 1.jpg") }}');
        background-size: cover;
        background-attachment: fixed;
        background-position: center;
        position: relative;
        overflow: hidden;
        min-height: 100vh;
        display: flex;
        align-items: center;
    }

    .space-ui-hero::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, rgba(5, 6, 23, 0.8) 0%, rgba(11, 17, 32, 0.6) 50%, rgba(18, 24, 38, 0.4) 100%);
        z-index: 1;
    }

    .space-ui-hero-content {
        position: relative;
        z-index: 2;
        max-width: 1000px;
        margin: 0 auto;
        padding: 0 20px;
        width: 100%;
    }

    .space-ui-hero-title {
        font-size: 3.5rem;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 20px;
        line-height: 1.2;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    }

    .space-ui-hero-subtitle {
        font-size: 1.3rem;
        color: var(--text-secondary);
        margin-bottom: 40px;
        line-height: 1.6;
        max-width: 800px;
        margin-left: auto;
        margin-right: auto;
    }

    .hero-buttons {
        display: flex;
        gap: 20px;
        justify-content: center;
        flex-wrap: wrap;
        margin-bottom: 60px;
    }

    .space-ui-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 30px;
        max-width: 600px;
        margin: 0 auto;
    }

    .space-ui-stat-card {
        background: var(--card-bg);
        backdrop-filter: blur(12px);
        border-radius: 15px;
        padding: 25px;
        text-align: center;
        border: 1px solid rgba(255, 255, 255, 0.1);
        transition: all 0.3s ease;
        animation: fadeInUp 0.6s ease forwards;
        opacity: 0;
        transform: translateY(30px);
    }

    .space-ui-stat-card:hover {
        transform: translateY(-5px);
        background: var(--card-bg-hover);
        border-color: var(--accent-1);
    }

    .space-ui-stat-number {
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--accent-1);
        display: block;
        text-shadow: 0 0 10px rgba(0, 210, 255, 0.3);
    }

    .space-ui-stat-label {
        color: var(--text-secondary);
        font-weight: 500;
        margin-top: 5px;
        font-size: 0.9rem;
    }

    /* Features Section */
    .features {
        padding: 80px 0;
        background: var(--space-900),
                    url('{{ url_for("static", filename="../images/im2.jpg") }}');
        background-size: cover;
        background-attachment: fixed;
        background-position: center;
        position: relative;
    }

    .features::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, var(--space-900) 0%, var(--space-800) 50%, var(--space-700) 100%);
        opacity: 0.9;
        z-index: 1;
    }

    .features .page-container {
        position: relative;
        z-index: 2;
    }

    .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 40px;
        margin-top: 50px;
    }

    .space-ui-feature-card {
        background: var(--card-bg);
        backdrop-filter: blur(12px);
        border-radius: 20px;
        padding: 40px;
        text-align: center;
        transition: all 0.3s ease;
        border: 1px solid rgba(255, 255, 255, 0.1);
        animation: fadeInUp 0.6s ease forwards;
        opacity: 0;
        transform: translateY(30px);
    }

    .space-ui-feature-card:hover {
        transform: translateY(-10px) scale(1.02);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        border-color: var(--accent-1);
    }

    .space-ui-feature-icon {
        width: 80px;
        height: 80px;
        background: linear-gradient(135deg, var(--accent-1) 0%, var(--accent-2) 100%);
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 25px;
        font-size: 2rem;
        color: white;
        transition: all 0.3s ease;
    }

    .space-ui-feature-card:hover .space-ui-feature-icon {
        transform: scale(1.1) rotate(5deg);
    }

    .space-ui-feature-title {
        font-size: 1.5rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 15px;
    }

    .space-ui-feature-description {
        color: var(--text-secondary);
        line-height: 1.6;
        margin-bottom: 20px;
    }

    /* Use Cases Section */
    .use-cases {
        padding: 80px 0 40px;
        background: var(--space-800),
                    url('{{ url_for("static", filename="../images/img 3.jpg") }}');
        background-size: cover;
        background-attachment: fixed;
        background-position: center;
        position: relative;
    }

    .use-cases::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, var(--space-800) 0%, var(--space-700) 50%, var(--space-600) 100%);
        opacity: 0.9;
        z-index: 1;
    }

    .use-cases .page-container {
        position: relative;
        z-index: 2;
    }

    .use-cases-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 30px;
        margin-top: 20px;
        margin-bottom: 0;
    }

    .use-case-card {
        background: var(--card-bg);
        backdrop-filter: blur(12px);
        border-radius: 15px;
        padding: 30px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        transition: all 0.3s ease;
        animation: fadeInUp 0.6s ease forwards;
        opacity: 0;
        transform: translateY(30px);
    }

    .use-case-card:hover {
        background: rgba(255, 255, 255, 0.15);
        transform: translateY(-8px) scale(1.02);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        border-color: var(--accent-1);
    }

    .use-case-icon {
        font-size: 2.5rem;
        color: var(--accent-1);
        margin-bottom: 20px;
        transition: all 0.3s ease;
    }

    .use-case-card:hover .use-case-icon {
        transform: scale(1.1) rotate(5deg);
        color: var(--accent-2);
    }

    .use-case-title {
        font-size: 1.3rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 15px;
    }

    .use-case-description {
        color: var(--text-secondary);
        line-height: 1.6;
    }

    /* CTA Section */
    .cta-section {
        padding: 40px 0 80px;
        background: var(--space-700);
        backdrop-filter: blur(12px);
        text-align: center;
        position: relative;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        margin-top: 0;
    }

    .cta-section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(90deg, transparent, var(--accent-1), transparent);
        opacity: 0.3;
    }

    .cta-content {
        max-width: 600px;
        margin: 0 auto;
        padding: 0 20px;
        position: relative;
        z-index: 2;
    }

    .cta-title {
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 20px;
        animation: fadeInUp 0.8s ease forwards;
        opacity: 0;
        transform: translateY(30px);
    }

    .cta-description {
        font-size: 1.1rem;
        color: var(--text-secondary);
        margin-bottom: 40px;
        line-height: 1.6;
        animation: fadeInUp 0.8s ease 0.2s forwards;
        opacity: 0;
        transform: translateY(30px);
    }

    /* Ensure CTA section doesn't override other elements */
    .cta-section .hero-buttons {
        position: relative;
        z-index: 2;
    }

    .cta-section .space-ui-btn {
        position: relative;
        z-index: 2;
    }

    /* Animation keyframes */
    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes slideInFromLeft {
        from {
            opacity: 0;
            transform: translateX(-50px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    @keyframes float {
        0%, 100% {
            transform: translateY(0px);
        }
        50% {
            transform: translateY(-10px);
        }
    }

    @keyframes pulse {
        0%, 100% {
            transform: scale(1);
        }
        50% {
            transform: scale(1.05);
        }
    }

    @keyframes glow {
        0%, 100% {
            box-shadow: 0 0 5px var(--accent-1);
        }
        50% {
            box-shadow: 0 0 20px var(--accent-1), 0 0 30px var(--accent-1);
        }
    }

    /* Responsive Design */
    @media (max-width: 768px) {
        .space-ui-hero-title {
            font-size: 2.5rem;
        }
        
        .space-ui-hero-subtitle {
            font-size: 1.1rem;
        }
        
        .hero-buttons {
            flex-direction: column;
            align-items: center;
        }
        
        .features-grid,
        .use-cases-grid {
            grid-template-columns: 1fr;
        }

        .space-ui-hero {
            min-height: 80vh;
            padding: 80px 0 60px;
        }

        .page-title {
            font-size: 2rem;
        }

        .cta-title {
            font-size: 2rem;
        }
    }

    @media (max-width: 480px) {
        .space-ui-hero-title {
            font-size: 2rem;
        }

        .space-ui-hero-subtitle {
            font-size: 1rem;
        }

        .page-title {
            font-size: 1.8rem;
        }

        .cta-title {
            font-size: 1.8rem;
        }

        .space-ui-feature-card,
        .use-case-card {
            padding: 20px;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="homepage-content">
<!-- Hero Section -->
<section class="space-ui-hero">
    <div class="space-ui-hero-content">
        <h1 class="space-ui-hero-title">🚀 Mission Control: Data Pathways to Healthy Cities</h1>
        <p class="space-ui-hero-subtitle">
            Transform satellite imagery into actionable insights for urban planning, environmental monitoring, 
            and infrastructure development using advanced AI algorithms. Your mission: Build sustainable cities for tomorrow.
        </p>
        
        <div class="hero-buttons" style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; margin-bottom: 60px;">
            <a href="/analysis" class="space-ui-btn">
                <i class="fas fa-rocket"></i>
                Launch Analysis
            </a>
            <a href="/predictions/urban-growth" class="space-ui-btn space-ui-btn-secondary">
                <i class="fas fa-chart-line"></i>
                Mission Reports
            </a>
        </div>
        
        <div class="space-ui-stats">
            <div class="space-ui-stat-card" data-status="active">
                <span class="space-ui-stat-number">5</span>
                <span class="space-ui-stat-label">Land Use Classes</span>
            </div>
            <div class="space-ui-stat-card" data-status="success">
                <span class="space-ui-stat-number">95%</span>
                <span class="space-ui-stat-label">Mission Success Rate</span>
            </div>
            <div class="space-ui-stat-card" data-status="active">
                <span class="space-ui-stat-number">6</span>
                <span class="space-ui-stat-label">Analysis Modules</span>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="features">
    <div class="page-container">
        <div class="page-header">
            <h2 class="page-title">🛰️ Mission Capabilities</h2>
            <p class="page-subtitle">
                Advanced satellite intelligence systems for comprehensive urban analysis and sustainable city planning
            </p>
        </div>
        
        <div class="features-grid">
            <div class="space-ui-feature-card">
                <div class="space-ui-feature-icon">
                    <i class="fas fa-image"></i>
                </div>
                <h3 class="space-ui-feature-title">Satellite Image Analysis</h3>
                <p class="space-ui-feature-description">
                    Upload satellite imagery for instant AI-powered land use classification. Get detailed statistics 
                    for Water, Buildings, Roads, Vegetation, and other land types with mission-grade accuracy.
                </p>
                <a href="/analysis" class="space-ui-btn">Launch Image Analysis</a>
            </div>
            
            <div class="space-ui-feature-card">
                <div class="space-ui-feature-icon">
                    <i class="fas fa-map-marked-alt"></i>
                </div>
                <h3 class="space-ui-feature-title">Interactive Map Intelligence</h3>
                <p class="space-ui-feature-description">
                    Select any area on our interactive satellite map and analyze land use patterns across multiple 
                    patches with comprehensive statistical breakdowns and real-time processing.
                </p>
                <a href="/analysis" class="space-ui-btn">Explore Mission Maps</a>
            </div>
            
            <div class="space-ui-feature-card">
                <div class="space-ui-feature-icon">
                    <i class="fas fa-brain"></i>
                </div>
                <h3 class="space-ui-feature-title">AI Mission Predictions</h3>
                <p class="space-ui-feature-description">
                    Get intelligent predictions for urban growth, environmental impact, infrastructure needs, 
                    and more based on advanced AI analysis of land use patterns and satellite data.
                </p>
                <a href="/predictions/urban-growth" class="space-ui-btn">View Mission Reports</a>
            </div>
        </div>
    </div>
</section>

<!-- Use Cases Section -->
<section class="use-cases">
    <div class="page-container">
        <div class="page-header">
            <h2 class="page-title">🌍 Mission Applications</h2>
            <p class="page-subtitle">
                Real-world applications of our satellite intelligence platform for sustainable urban development
            </p>
        </div>
        
        <div class="use-cases-grid">
            <div class="use-case-card">
                <div class="use-case-icon">
                    <i class="fas fa-city"></i>
                </div>
                <h3 class="use-case-title">Urban Planning</h3>
                <p class="use-case-description">
                    Analyze urban sprawl patterns, track city expansion, and predict future development needs 
                    for better urban planning decisions and sustainable growth.
                </p>
            </div>
            
            <div class="use-case-card">
                <div class="use-case-icon">
                    <i class="fas fa-leaf"></i>
                </div>
                <h3 class="use-case-title">Environmental Monitoring</h3>
                <p class="use-case-description">
                    Track vegetation cover, monitor water resources, and assess environmental impact 
                    of development projects in real-time with satellite precision.
                </p>
            </div>
            
            <div class="use-case-card">
                <div class="use-case-icon">
                    <i class="fas fa-road"></i>
                </div>
                <h3 class="use-case-title">Infrastructure Development</h3>
                <p class="use-case-description">
                    Plan transportation networks, identify infrastructure gaps, and optimize resource 
                    allocation for public utilities and smart city development.
                </p>
            </div>
            
            <div class="use-case-card">
                <div class="use-case-icon">
                    <i class="fas fa-heartbeat"></i>
                </div>
                <h3 class="use-case-title">Public Health</h3>
                <p class="use-case-description">
                    Assess urban heat island effects, identify areas needing green spaces, and predict 
                    health risks from environmental factors using satellite data.
                </p>
            </div>
            
            <div class="use-case-card">
                <div class="use-case-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h3 class="use-case-title">Disaster Management</h3>
                <p class="use-case-description">
                    Map flood-prone areas, assess vulnerability in coastal zones, and plan disaster 
                    response strategies based on comprehensive land use analysis.
                </p>
            </div>
            
            <div class="use-case-card">
                <div class="use-case-icon">
                    <i class="fas fa-seedling"></i>
                </div>
                <h3 class="use-case-title">Agriculture & Food Security</h3>
                <p class="use-case-description">
                    Monitor agricultural land availability, assess food production capacity, and predict 
                    agricultural sustainability trends for food security planning.
                </p>
            </div>
            
            <div class="use-case-card" onclick="window.location.href='/urban-planning'" style="cursor: pointer;">
                <div class="use-case-icon">
                    <i class="fas fa-hospital-alt"></i>
                </div>
                <h3 class="use-case-title">Urban Planning Analyzer</h3>
                <p class="use-case-description">
                    Comprehensive analysis of 10 urban infrastructure categories: healthcare, food access, 
                    housing, transportation, parks, and more for optimal city development.
                </p>
                <div style="margin-top: 15px;">
                    <span style="display: inline-block; background: linear-gradient(135deg, var(--accent-1), var(--accent-2)); 
                                 color: white; padding: 8px 20px; border-radius: 20px; font-size: 0.9rem; font-weight: 600;">
                        <i class="fas fa-rocket"></i> Launch Analyzer
                    </span>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="cta-section">
    <div class="cta-content">
        <h2 class="cta-title">🚀 Ready for Mission Launch?</h2>
        <p class="cta-description">
            Upload your satellite images or explore our interactive map to start analyzing land use patterns 
            and generating intelligent predictions for your urban planning missions.
        </p>
        <div class="hero-buttons">
            <a href="/analysis" class="space-ui-btn">
                <i class="fas fa-upload"></i>
                Upload Mission Data
            </a>
            <a href="/analysis" class="space-ui-btn space-ui-btn-secondary">
                <i class="fas fa-map"></i>
                Explore Mission Maps
            </a>
        </div>
    </div>
</section>

<!-- Three.js Container -->
<div id="threejs-container"></div>
</div> <!-- End homepage-content -->
{% endblock %}

{% block extra_js %}
<!-- Three.js Library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<script>
// Three.js Space Animation
class SpaceAnimation {
    constructor() {
        this.container = document.getElementById('threejs-container');
        if (!this.container) return;
        
        this.scene = new THREE.Scene();
        this.camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        this.renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        
        this.setupRenderer();
        this.createSpaceEnvironment();
        this.createSatellites();
        this.createPlanets();
        this.createStars();
        this.animate();
        this.handleResize();
    }

    setupRenderer() {
        this.renderer.setSize(window.innerWidth, window.innerHeight);
        this.renderer.setClearColor(0x000000, 0);
        this.container.appendChild(this.renderer.domElement);
    }

    createSpaceEnvironment() {
        // Create multiple nebula layers for depth
        const nebulaGeometry = new THREE.SphereGeometry(300, 64, 64);
        const nebulaMaterial = new THREE.MeshBasicMaterial({
            color: 0x001122,
            transparent: true,
            opacity: 0.4
        });
        this.nebula = new THREE.Mesh(nebulaGeometry, nebulaMaterial);
        this.scene.add(this.nebula);

        // Create secondary nebula
        const nebula2Geometry = new THREE.SphereGeometry(150, 32, 32);
        const nebula2Material = new THREE.MeshBasicMaterial({
            color: 0x002244,
            transparent: true,
            opacity: 0.3
        });
        this.nebula2 = new THREE.Mesh(nebula2Geometry, nebula2Material);
        this.nebula2.position.set(50, 30, -100);
        this.scene.add(this.nebula2);

        // Add ambient light
        const ambientLight = new THREE.AmbientLight(0x404040, 0.4);
        this.scene.add(ambientLight);

        // Add directional light
        const directionalLight = new THREE.DirectionalLight(0x00d2ff, 0.8);
        directionalLight.position.set(10, 10, 5);
        this.scene.add(directionalLight);

        // Add point lights for more dynamic lighting
        const pointLight1 = new THREE.PointLight(0x2fe7a9, 0.5, 100);
        pointLight1.position.set(-20, 20, 10);
        this.scene.add(pointLight1);

        const pointLight2 = new THREE.PointLight(0xff6b6b, 0.3, 80);
        pointLight2.position.set(30, -10, 15);
        this.scene.add(pointLight2);
    }

    createSatellites() {
        this.satellites = [];
        const satelliteCount = 5;

        for (let i = 0; i < satelliteCount; i++) {
            const satelliteGroup = new THREE.Group();
            
            // Satellite body
            const bodyGeometry = new THREE.BoxGeometry(0.8, 0.5, 1.2);
            const bodyMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x00d2ff,
                shininess: 100,
                emissive: 0x001122
            });
            const body = new THREE.Mesh(bodyGeometry, bodyMaterial);
            satelliteGroup.add(body);

            // Solar panels
            const panelGeometry = new THREE.BoxGeometry(3, 0.2, 1.5);
            const panelMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x2fe7a9,
                shininess: 50,
                emissive: 0x001100
            });
            
            const leftPanel = new THREE.Mesh(panelGeometry, panelMaterial);
            leftPanel.position.set(-1.8, 0, 0);
            satelliteGroup.add(leftPanel);
            
            const rightPanel = new THREE.Mesh(panelGeometry, panelMaterial);
            rightPanel.position.set(1.8, 0, 0);
            satelliteGroup.add(rightPanel);

            // Add antenna
            const antennaGeometry = new THREE.CylinderGeometry(0.05, 0.05, 1);
            const antennaMaterial = new THREE.MeshPhongMaterial({ color: 0xffffff });
            const antenna = new THREE.Mesh(antennaGeometry, antennaMaterial);
            antenna.position.set(0, 0.8, 0);
            satelliteGroup.add(antenna);

            // Position satellite
            const radius = 12 + i * 3;
            const angle = (i / satelliteCount) * Math.PI * 2;
            satelliteGroup.position.set(
                Math.cos(angle) * radius,
                Math.sin(i * 0.5) * 4,
                Math.sin(angle) * radius
            );

            this.scene.add(satelliteGroup);
            this.satellites.push({
                group: satelliteGroup,
                radius: radius,
                angle: angle,
                speed: 0.008 + i * 0.003
            });
        }
    }

    createPlanets() {
        this.planets = [];
        
        // Earth
        const earthGeometry = new THREE.SphereGeometry(2, 32, 32);
        const earthMaterial = new THREE.MeshPhongMaterial({
            color: 0x4a90e2,
            shininess: 100
        });
        const earth = new THREE.Mesh(earthGeometry, earthMaterial);
        earth.position.set(0, 0, -20);
        this.scene.add(earth);
        this.planets.push({ mesh: earth, rotationSpeed: 0.01 });

        // Moon
        const moonGeometry = new THREE.SphereGeometry(0.5, 16, 16);
        const moonMaterial = new THREE.MeshPhongMaterial({
            color: 0xcccccc,
            shininess: 50
        });
        const moon = new THREE.Mesh(moonGeometry, moonMaterial);
        moon.position.set(4, 0, -20);
        this.scene.add(moon);
        this.planets.push({ mesh: moon, rotationSpeed: 0.02 });
    }

    createStars() {
        const starGeometry = new THREE.BufferGeometry();
        const starCount = 2000;
        const positions = new Float32Array(starCount * 3);
        const colors = new Float32Array(starCount * 3);

        for (let i = 0; i < starCount * 3; i += 3) {
            positions[i] = (Math.random() - 0.5) * 300;
            positions[i + 1] = (Math.random() - 0.5) * 300;
            positions[i + 2] = (Math.random() - 0.5) * 300;

            // Create colorful stars
            const color = new THREE.Color();
            const colorChoice = Math.random();
            if (colorChoice < 0.3) {
                color.setHex(0x00d2ff); // Blue
            } else if (colorChoice < 0.6) {
                color.setHex(0x2fe7a9); // Teal
            } else if (colorChoice < 0.8) {
                color.setHex(0xff6b6b); // Red
            } else {
                color.setHex(0xffffff); // White
            }
            
            colors[i] = color.r;
            colors[i + 1] = color.g;
            colors[i + 2] = color.b;
        }

        starGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        starGeometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));

        const starMaterial = new THREE.PointsMaterial({
            size: 1.5,
            transparent: true,
            opacity: 0.9,
            vertexColors: true,
            blending: THREE.AdditiveBlending
        });

        this.stars = new THREE.Points(starGeometry, starMaterial);
        this.scene.add(this.stars);
    }

    animate() {
        requestAnimationFrame(() => this.animate());

        // Rotate satellites
        this.satellites.forEach(satellite => {
            satellite.angle += satellite.speed;
            satellite.group.position.x = Math.cos(satellite.angle) * satellite.radius;
            satellite.group.position.z = Math.sin(satellite.angle) * satellite.radius;
            satellite.group.rotation.y += 0.01;
        });

        // Rotate planets
        this.planets.forEach(planet => {
            planet.mesh.rotation.y += planet.rotationSpeed;
        });

        // Rotate stars
        if (this.stars) {
            this.stars.rotation.y += 0.0005;
        }

        // Rotate nebula
        if (this.nebula) {
            this.nebula.rotation.y += 0.001;
        }
        if (this.nebula2) {
            this.nebula2.rotation.y -= 0.0005;
            this.nebula2.rotation.x += 0.0003;
        }

        this.renderer.render(this.scene, this.camera);
    }

    handleResize() {
        window.addEventListener('resize', () => {
            this.camera.aspect = window.innerWidth / window.innerHeight;
            this.camera.updateProjectionMatrix();
            this.renderer.setSize(window.innerWidth, window.innerHeight);
        });
    }
}

// Enhanced UI Animations
class UIAnimations {
    constructor() {
        this.initScrollAnimations();
        this.initParallaxEffects();
        this.initHoverEffects();
        this.initCounterAnimations();
        this.initFloatingElements();
    }

    initScrollAnimations() {
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                    
                    // Add staggered animation for cards
                    if (entry.target.classList.contains('space-ui-feature-card') || 
                        entry.target.classList.contains('use-case-card')) {
                        const cards = entry.target.parentElement.querySelectorAll('.space-ui-feature-card, .use-case-card');
                        cards.forEach((card, index) => {
                            setTimeout(() => {
                                card.style.opacity = '1';
                                card.style.transform = 'translateY(0)';
                            }, index * 100);
                        });
                    }
                }
            });
        }, observerOptions);

        // Animate feature cards
        document.querySelectorAll('.space-ui-feature-card').forEach((card, index) => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(30px)';
            card.style.transition = `opacity 0.6s ease ${index * 0.1}s, transform 0.6s ease ${index * 0.1}s`;
            observer.observe(card);
        });

        // Animate use case cards
        document.querySelectorAll('.use-case-card').forEach((card, index) => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(30px)';
            card.style.transition = `opacity 0.6s ease ${index * 0.1}s, transform 0.6s ease ${index * 0.1}s`;
            observer.observe(card);
        });

        // Animate stat cards
        document.querySelectorAll('.space-ui-stat-card').forEach((card, index) => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            card.style.transition = `opacity 0.5s ease ${index * 0.1}s, transform 0.5s ease ${index * 0.1}s`;
            observer.observe(card);
        });

        // Animate page headers
        document.querySelectorAll('.page-header').forEach(header => {
            header.style.opacity = '0';
            header.style.transform = 'translateY(30px)';
            header.style.transition = 'opacity 0.8s ease, transform 0.8s ease';
            observer.observe(header);
        });
    }

    initParallaxEffects() {
        let ticking = false;
        
        const updateParallax = () => {
            const scrolled = window.pageYOffset;
            const parallaxElements = document.querySelectorAll('.space-ui-hero, .features, .use-cases');
            
            parallaxElements.forEach(element => {
                const speed = 0.5;
                const yPos = -(scrolled * speed);
                element.style.transform = `translateY(${yPos}px)`;
            });
            
            ticking = false;
        };

        const requestTick = () => {
            if (!ticking) {
                requestAnimationFrame(updateParallax);
                ticking = true;
            }
        };

        window.addEventListener('scroll', requestTick, { passive: true });
    }

    initHoverEffects() {
        // Enhanced button hover effects
        document.querySelectorAll('.space-ui-btn').forEach(btn => {
            btn.addEventListener('mouseenter', () => {
                btn.style.transform = 'translateY(-3px) scale(1.05)';
                btn.style.boxShadow = '0 10px 30px rgba(0, 210, 255, 0.3)';
                btn.style.transition = 'all 0.3s ease';
            });

            btn.addEventListener('mouseleave', () => {
                btn.style.transform = 'translateY(0) scale(1)';
                btn.style.boxShadow = '0 6px 18px rgba(0, 210, 255, 0.12)';
            });
        });

        // Card hover effects
        document.querySelectorAll('.space-ui-feature-card, .use-case-card').forEach(card => {
            card.addEventListener('mouseenter', () => {
                card.style.transform = 'translateY(-8px) scale(1.02)';
                card.style.boxShadow = '0 20px 40px rgba(0, 0, 0, 0.2)';
                card.style.transition = 'all 0.3s ease';
            });

            card.addEventListener('mouseleave', () => {
                card.style.transform = 'translateY(0) scale(1)';
                card.style.boxShadow = '0 4px 14px rgba(2, 6, 23, 0.6)';
            });
        });

        // Icon hover effects
        document.querySelectorAll('.space-ui-feature-icon, .use-case-icon').forEach(icon => {
            icon.addEventListener('mouseenter', () => {
                icon.style.transform = 'scale(1.1) rotate(5deg)';
                icon.style.transition = 'all 0.3s ease';
            });

            icon.addEventListener('mouseleave', () => {
                icon.style.transform = 'scale(1) rotate(0deg)';
            });
        });
    }

    initCounterAnimations() {
        const animateCounter = (element, target, duration = 2000) => {
            let start = 0;
            const increment = target / (duration / 16);
            
            const timer = setInterval(() => {
                start += increment;
                if (start >= target) {
                    element.textContent = target;
                    clearInterval(timer);
                } else {
                    element.textContent = Math.floor(start);
                }
            }, 16);
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const numberElement = entry.target.querySelector('.space-ui-stat-number');
                    if (numberElement) {
                        const target = parseInt(numberElement.textContent);
                        if (!isNaN(target)) {
                            animateCounter(numberElement, target);
                        }
                    }
                }
            });
        });

        document.querySelectorAll('.space-ui-stat-card').forEach(card => {
            observer.observe(card);
        });
    }

    initFloatingElements() {
        // Add floating animation to stat cards
        document.querySelectorAll('.space-ui-stat-card').forEach((card, index) => {
            card.style.animation = `float 3s ease-in-out infinite ${index * 0.5}s`;
        });

        // Add pulse animation to feature icons
        document.querySelectorAll('.space-ui-feature-icon').forEach((icon, index) => {
            icon.style.animation = `pulse 2s ease-in-out infinite ${index * 0.3}s`;
        });
    }
}

// Initialize animations when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    new SpaceAnimation();
    new UIAnimations();
});

// Add smooth scrolling for navigation
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    });
});

// Add typing animation to hero title
function typeWriter(element, text, speed = 100) {
    let i = 0;
    element.innerHTML = '';
    
    function type() {
        if (i < text.length) {
            element.innerHTML += text.charAt(i);
            i++;
            setTimeout(type, speed);
        }
    }
    
    type();
}

// Initialize typing animation
document.addEventListener('DOMContentLoaded', () => {
    const heroTitle = document.querySelector('.space-ui-hero-title');
    if (heroTitle) {
        const originalText = heroTitle.textContent;
        setTimeout(() => {
            typeWriter(heroTitle, originalText, 80);
        }, 1000);
    }
});

// Homepage specific optimizations
document.addEventListener('DOMContentLoaded', () => {
    // Ensure homepage content flows properly with footer
    document.body.style.minHeight = '100vh';
    document.querySelector('.main-content').style.minHeight = 'calc(100vh - 70px)';
});
</script>
{% endblock %}